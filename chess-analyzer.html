<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Chess Position Analyzer - Online Chess Calculator</title>
    <meta name="description" content="Analyze any chess position with the Stockfish chess engine. Set up positions and get the best moves instantly.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- External Dependencies -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/ui-lightness/jquery-ui.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chess Board CSS and JS -->
    <link rel="stylesheet" href="chessboard-1.0.0.min.css">
    <script src="chessboard-1.0.0.min.js"></script>
    
    <!-- Chess.js for game logic -->
    <script src="chess.js"></script>
    
    <!-- Stockfish Engine -->
    <script src="stockfish.asm.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="container">
        <header>
            <h1>Chess Position Analyzer</h1>
            <p>Analyze any chess position with the powerful Stockfish engine</p>
        </header>

        <div id="main-content">
            <!-- Chess Board Section -->
            <div id="board-section">
                <div id="myBoard"></div>
            </div>

            <!-- Controls Section -->
            <div id="controls-section">
                <!-- Board Controls -->
                <div class="control-group">
                    <label>Board Controls:</label>
                    <div id="board-controls">
                        <button id="startBtn" class="btn btn-secondary">Start Position</button>
                        <button id="clearBtn" class="btn btn-secondary">Clear Board</button>
                        <button id="flipBtn" class="btn btn-secondary">Flip Board</button>
                    </div>
                </div>
                
                <div class="control-group">
                    <label>Position Navigation:</label>
                    <div id="navigation-controls">
                        <button id="prevBtn" class="btn btn-secondary" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <button id="nextBtn" class="btn btn-secondary" disabled>
                            <i class="fas fa-chevron-right"></i> Next
                        </button>
                    </div>
                </div>
                
                <!-- FEN Input -->
                <div class="control-group">
                    <label for="fenInput">FEN:</label>
                    <div class="fen-input-container">
                        <input type="text" id="fenInput" placeholder="Enter FEN position">
                        <button id="setFenBtn" class="btn btn-secondary">Set FEN</button>
                    </div>
                </div>

                <!-- Game State Controls -->
                <div class="control-group turn-control-row">
                    <label>Turn:</label>
                    <div class="turn-buttons">
                        <button type="button" id="whiteToMoveBtn" class="turn-btn white-btn active" data-turn="w" title="White to move">
                            <span class="turn-circle">♔</span>
                        </button>
                        <button type="button" id="blackToMoveBtn" class="turn-btn black-btn" data-turn="b" title="Black to move">
                            <span class="turn-circle">♚</span>
                        </button>
                    </div>
                    <!-- Hidden radio buttons for form compatibility -->
                    <input type="radio" id="whiteToMove" name="turn" value="w" checked style="display: none;">
                    <input type="radio" id="blackToMove" name="turn" value="b" style="display: none;">
                </div>

                <!-- Castling Rights -->
                <div class="control-group">
                    <label>Castling Rights:</label>
                    <div class="castling-buttons">
                        <button type="button" id="whiteKingSideBtn" class="castling-btn active" data-castling="whiteKingSide" title="White kingside castling">
                            ♔O-O
                        </button>
                        <button type="button" id="whiteQueenSideBtn" class="castling-btn active" data-castling="whiteQueenSide" title="White queenside castling">
                            ♔O-O-O
                        </button>
                        <button type="button" id="blackKingSideBtn" class="castling-btn active" data-castling="blackKingSide" title="Black kingside castling">
                            ♚O-O
                        </button>
                        <button type="button" id="blackQueenSideBtn" class="castling-btn active" data-castling="blackQueenSide" title="Black queenside castling">
                            ♚O-O-O
                        </button>
                    </div>
                    <!-- Hidden checkboxes for form compatibility -->
                    <input type="checkbox" id="whiteKingSide" checked style="display: none;">
                    <input type="checkbox" id="whiteQueenSide" checked style="display: none;">
                    <input type="checkbox" id="blackKingSide" checked style="display: none;">
                    <input type="checkbox" id="blackQueenSide" checked style="display: none;">
                </div>

                <!-- Analysis Controls -->
                <div class="control-group analysis-control-row">
                    <label for="thinkTime">Think Time (seconds):</label>
                    <input type="number" id="thinkTime" value="3" min="1" max="999" class="compact-number">
                    
                    <div class="mode-buttons">
                        <button type="button" id="showMoveBtn" class="mode-btn active" data-mode="show" title="Show best moves on board">
                            Show
                        </button>
                        <button type="button" id="makeMoveBtn" class="mode-btn" data-mode="make" title="Automatically make the best move">
                            Make
                        </button>
                    </div>
                    <!-- Hidden radio buttons for form compatibility -->
                    <input type="radio" id="showMove" name="mode" value="show" checked style="display: none;">
                    <input type="radio" id="makeMove" name="mode" value="make" style="display: none;">
                </div>

                <!-- Calculate Button -->
                <button id="calculateBtn" class="btn btn-primary">Calculate Best Move</button>

                <!-- Progress Bars -->
                <div id="progressBars">
                    <div id="analysisProgress"></div>
                    <div id="timeProgress"></div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section">
                <h3>Analysis Results</h3>
                
                <div class="result-item">
                    <label>Best Move #1:</label>
                    <input type="text" id="bestMove1" readonly>
                    <input type="text" id="evaluation1" readonly class="eval-field">
                    <div class="move-details">
                        <span class="move-description" id="moveDescription1"></span>
                        <button class="make-move-btn" id="makeMoveBtn1" onclick="makeSelectedMove(1)">Make Move</button>
                    </div>
                </div>
                
                <div class="result-item">
                    <label>Best Move #2:</label>
                    <input type="text" id="bestMove2" readonly>
                    <input type="text" id="evaluation2" readonly class="eval-field">
                    <div class="move-details">
                        <span class="move-description" id="moveDescription2"></span>
                        <button class="make-move-btn" id="makeMoveBtn2" onclick="makeSelectedMove(2)">Make Move</button>
                    </div>
                </div>
                
                <div class="result-item">
                    <label>Best Move #3:</label>
                    <input type="text" id="bestMove3" readonly>
                    <input type="text" id="evaluation3" readonly class="eval-field">
                    <div class="move-details">
                        <span class="move-description" id="moveDescription3"></span>
                        <button class="make-move-btn" id="makeMoveBtn3" onclick="makeSelectedMove(3)">Make Move</button>
                    </div>
                </div>
                
                <div class="result-item">
                    <label>Depth:</label>
                    <input type="text" id="depth" readonly>
                </div>
                
                <div class="result-item">
                    <label>Principal Variation #1:</label>
                    <textarea id="principalVariation1" readonly rows="2"></textarea>
                </div>
                
                <div class="result-item">
                    <label>Principal Variation #2:</label>
                    <textarea id="principalVariation2" readonly rows="2"></textarea>
                </div>
                
                <div class="result-item">
                    <label>Principal Variation #3:</label>
                    <textarea id="principalVariation3" readonly rows="2"></textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom JavaScript -->
    <script src="chess-analyzer.js"></script>
</body>
</html>
